<%- include('partials/header') %>

    <!-- Back Button -->
    <div class="row mb-3">
        <div class="col-12">
            <a href="/" class="text-decoration-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left me-1" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
                </svg>
                Back to Events
            </a>
        </div>
    </div>

    <!-- Alert Messages -->
    <% if (typeof message !== 'undefined' && message) { %>
        <div class="alert alert-<%= messageType || 'info' %> alert-dismissible fade show" role="alert">
            <%= message %>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    <% } %>

    <!-- Event Details Card -->
    <% if (typeof event !== 'undefined') { %>
        <div class="card mb-4 shadow-sm">
            <div class="card-header" style="background: linear-gradient(135deg, var(--accent-color) 0%, var(--accent-hover) 100%); color: white;">
                <h3 class="mb-0"><%= event.title %></h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <h6 class="text-muted mb-1">Date</h6>
                        <p class="mb-0">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar3 me-2" viewBox="0 0 16 16">
                                <path d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z"/>
                                <path d="M12 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-5 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm2-3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-5 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                            </svg>
                            <%= new Date(event.date).toLocaleDateString('en-US', { 
                                year: 'numeric', 
                                month: 'long', 
                                day: 'numeric',
                                weekday: 'long'
                            }) %>
                        </p>
                    </div>
                    <div class="col-md-6 mb-3">
                        <h6 class="text-muted mb-1">Venue</h6>
                        <p class="mb-0">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt-fill me-2" viewBox="0 0 16 16">
                                <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                            </svg>
                            <%= event.venue %>
                        </p>
                    </div>
                </div>
                <% if (typeof user !== 'undefined' && user && user.role === 'student') { %>
                    <div class="mt-3">
                        <a href="/register/<%= event.id %>" class="btn btn-primary">
                            Register for this Event
                        </a>
                    </div>
                <% } else if (typeof user === 'undefined' || !user) { %>
                    <div class="mt-3">
                        <a href="/login" class="btn btn-primary">
                            Login to Register
                        </a>
                    </div>
                <% } %>
            </div>
        </div>
    <% } %>

    <!-- Students Attending -->
    <div class="card shadow">
        <div class="card-header" style="background: linear-gradient(135deg, var(--accent-color) 0%, var(--accent-hover) 100%); color: white;">
            <h5 class="mb-0">
                Students Attending
                <span class="badge bg-light text-dark ms-2">
                    <%= typeof registrations !== 'undefined' ? registrations.length : 0 %>
                </span>
            </h5>
        </div>
        <div class="card-body">
            <% if (typeof registrations !== 'undefined' && registrations.length > 0) { %>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% registrations.forEach((registration, index) => { %>
                                <tr>
                                    <td><%= index + 1 %></td>
                                    <td><strong><%= registration.name %></strong></td>
                                    <td><%= registration.email %></td>
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                </div>
            <% } else { %>
                <p class="text-muted mb-0">No students have registered for this event yet.</p>
            <% } %>
        </div>
    </div>

<%- include('partials/footer') %>


